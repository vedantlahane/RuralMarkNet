{% extends "accounts/dashboard.html" %}
{% load i18n %}
{% block content %}
{{ block.super }}
<section class="mt-10 grid gap-6 lg:grid-cols-3">
    <div class="lg:col-span-2 rounded-3xl bg-white p-6 shadow-sm ring-1 ring-emerald-50">
        <h2 class="text-xl font-semibold text-slate-900">{% trans "Delivery Schedule" %}</h2>
        <p class="mt-2 text-sm text-slate-500">{% trans "Track upcoming deliveries and stay ready for handovers." %}</p>
        <ul class="mt-4 space-y-3 text-sm text-slate-600">
            {% for delivery in deliveries %}
                <li class="flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-3">
                    <span>
                        {% blocktrans %}Order #{{ delivery.order.pk }}{% endblocktrans %}
                        {% if delivery.order.scheduled_date %}
                            · {{ delivery.order.scheduled_date|date:"SHORT_DATE_FORMAT" }}
                        {% endif %}
                    </span>
                    <span class="rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700">{{ delivery.get_status_display }}</span>
                </li>
            {% empty %}
                <li class="rounded-2xl bg-slate-50 px-4 py-6 text-center text-slate-500">
                    {% trans "No deliveries scheduled yet. Check back after placing your first order." %}
                </li>
            {% endfor %}
        </ul>
    </div>
    <div class="space-y-6">
        {% if next_delivery %}
            <div class="rounded-3xl bg-emerald-100 p-6 text-emerald-900 shadow-sm">
                <h3 class="text-lg font-semibold">{% trans "Next delivery" %}</h3>
                <dl class="mt-4 space-y-2 text-sm">
                    <div class="flex items-center justify-between">
                        <dt class="text-emerald-800">{% trans "Order" %}</dt>
                        <dd class="font-medium">#{{ next_delivery.order.pk }}</dd>
                    </div>
                    <div class="flex items-center justify-between">
                        <dt class="text-emerald-800">{% trans "Scheduled" %}</dt>
                        <dd class="font-medium">
                            {% if next_delivery.order.scheduled_date %}
                                {{ next_delivery.order.scheduled_date|date:"DATE_FORMAT" }}
                            {% else %}
                                {% trans "To be confirmed" %}
                            {% endif %}
                            {% if next_delivery.order.scheduled_window %}
                                · {{ next_delivery.order.scheduled_window }}
                            {% endif %}
                        </dd>
                    </div>
                    {% if next_delivery.driver_name %}
                        <div class="flex items-center justify-between">
                            <dt class="text-emerald-800">{% trans "Driver" %}</dt>
                            <dd class="font-medium">{{ next_delivery.driver_name }}</dd>
                        </div>
                    {% endif %}
                    {% if next_delivery.contact_number %}
                        <div class="flex items-center justify-between">
                            <dt class="text-emerald-800">{% trans "Contact" %}</dt>
                            <dd class="font-medium">{{ next_delivery.contact_number }}</dd>
                        </div>
                    {% endif %}
                    <div class="flex items-center justify-between">
                        <dt class="text-emerald-800">{% trans "Status" %}</dt>
                        <dd class="font-semibold">{{ next_delivery.get_status_display }}</dd>
                    </div>
                </dl>
                <p class="mt-4 text-xs text-emerald-700">{% trans "Update your delivery notes if timing changes." %}</p>
            </div>
        {% endif %}
        <div class="rounded-3xl bg-emerald-50 p-6">
            <h3 class="text-lg font-semibold text-emerald-900">{% trans "Tips for fresh produce" %}</h3>
            <p class="mt-3 text-sm text-emerald-800">
                {% trans "Add delivery instructions and confirm your availability so farmers can plan the best drop-off time." %}
            </p>
        </div>
    </div>
</section>
{% endblock %}
